<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Book Recommendation Form</title>
    <link href="../../styles/form.css" rel="stylesheet" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        const output = document.createElement("div");
        document.body.appendChild(output);

        form.addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent the form from submitting traditionally

          const genre = form.querySelector("#genre").value;
          const year = form.querySelector("#year").value;
          const length = form.querySelector("#length").value;

          // Simulate a simple book data store
          const books = [
            {
              title: "Norwegian Wood",
              year: "1987",
              genre: "coming-of-age",
              length: "medium",
            },
            {
              title: "Kafka on the Shore",
              year: "2002",
              genre: "magical-realism",
              length: "long",
            },
            { title: "1Q84", year: "2009", genre: "dystopian", length: "long" },
            {
              title: "The Wind-Up Bird Chronicle",
              year: "1994",
              genre: "mystery",
              length: "long",
            },
            {
              title: "Hard-Boiled Wonderland",
              year: "1985",
              genre: "science-fiction",
              length: "medium",
            },
            {
              title: "Colorless Tsukuru Tazaki",
              year: "2013",
              genre: "coming-of-age",
              length: "medium",
            },
          ];

          // Filter books based on selection
          const results = books.filter(
            (book) =>
              book.genre === genre &&
              book.year === year &&
              book.length === length
          );

          // Display results
          output.innerHTML = "<h2>Recommended Books</h2>";
          if (results.length > 0) {
            const list = document.createElement("ul");
            results.forEach((book) => {
              const item = document.createElement("li");
              item.textContent = `${book.title} (${book.year})`;
              list.appendChild(item);
            });
            output.appendChild(list);
          } else {
            output.innerHTML += "<p>No books found matching your criteria.</p>";
          }
        });
      });
    </script>
  </head>
  <body>
    <h1>Find Your Murakami Book</h1>
    <form action="submit_form.php" method="post">
      <label for="genre">Choose a genre:</label>
      <select id="genre" name="genre">
        <option value="coming-of-age">Coming-of-age</option>
        <option value="romance">Romance</option>
        <option value="magical-realism">Magical Realism</option>
        <option value="surrealism">Surrealism</option>
        <option value="dystopian">Dystopian</option>
        <option value="fantasy">Fantasy</option>
        <option value="mystery">Mystery</option>
        <option value="science-fiction">Science Fiction</option>
      </select>

      <label for="year">Enter publication year:</label>
      <input
        type="number"
        id="year"
        name="year"
        placeholder="e.g., 1999"
        required
        min="1900"
        max="2023"
      />

      <label for="length">Book length:</label>
      <select id="length" name="length">
        <option value="short">Short (under 300 pages)</option>
        <option value="medium">Medium (300-500 pages)</option>
        <option value="long">Long (over 500 pages)</option>
      </select>

      <button type="submit">Find Books</button>
      <br />
      <button type="submit" onclick="window.location.href='../../index.html'">
        Home
      </button>
    </form>
  </body>
</html>
